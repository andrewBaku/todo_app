{% extends 'todo/base.html' %}

{% block content %}

    {% load crispy_forms_tags %}

    <div class="m-3">

    {% if user.is_authenticated == False %}
    <h2 class="mb-3">To create your tasks,
        please <a class='link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-75-hover' href="{% url 'sign_up' %}">register</a>
        or
        <a class='link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-75-hover' href="{% url 'log_in' %}">log in</a>
        .</h2>
        {% endif %}

    <form method="POST">
    {% csrf_token %}

    {{ form|crispy }}

        {% if user.is_authenticated == False %}
    <button type="submit" class="btn btn-primary m-3" disabled>Submit</button>
        {% else %}
        <button type="submit" class="btn btn-primary m-3">Submit</button>
        {% endif %}
    </form>

    </div>

    <h2 class="my-4 m-3">My tasks</h2>
    <div class="row m-3">
    {% for t in todo_tasks %}

        <div class="card m-2">
  <div class="card-header">
    Created by: {{ t.created_date }}
  </div>
  <div class="card-body">
    <h5 class="card-title">{{ t.title }}</h5>
    <p class="card-text">{{ t.text }}</p>
    <a href="#" class="btn btn-primary">Go somewhere</a>
  </div>
</div>

    {% empty %}
<p>No tasks added.</p>
    {% endfor %}
    </div>


{% endblock %}